*{box-sizing:border-box}
body{
  margin:0;
  font-family:-apple-system,BlinkMacSystemFont,'Segoe UI',Roboto,'Hiragino Kaku Gothic ProN',Meiryo,sans-serif;
  background:#0e1020;
  color:#fff;
}
.hidden{display:none!important}
.game{max-width:960px;margin:0 auto;padding:12px;}
.battlefield{position:relative;aspect-ratio:16/9;border-radius:16px;overflow:hidden;box-shadow:0 10px 30px rgba(0,0,0,.4)}
.bg{position:absolute;inset:0;width:100%;height:100%;object-fit:cover;filter:brightness(.85)}
.hp.ui{position:absolute;inset:12px 12px auto 12px;display:flex;gap:16px;justify-content:space-between;z-index:3}
.bar{display:flex;gap:8px;align-items:center;background:rgba(0,0,0,.35);padding:8px 12px;border-radius:12px;backdrop-filter:blur(2px)}
.track{width:220px;height:12px;background:rgba(255,255,255,.15);border-radius:999px;overflow:hidden}
.fill{height:100%;background:linear-gradient(90deg,#30e88c,#1db954);transition:width .35s ease}
.bar.monster .fill{background:linear-gradient(90deg,#ff6b6b,#ff3b3b)}
.sprites{position:absolute;inset:0;display:grid;grid-template-columns:1fr 1fr;align-items:end;z-index:2}
.sprites img{max-height:70%}
.hero{justify-self:start;margin-left:4%;transform-origin:bottom center;transition:transform .15s}
.monster{justify-self:end;margin-right:4%;transform-origin:bottom center;transition:transform .15s}
.hit{position:absolute;left:55%;top:35%;width:140px;opacity:0;transition:opacity .2s, transform .2s;transform:scale(.6)}
.panel{margin-top:14px;background:#121433;border:1px solid rgba(255,255,255,.1);border-radius:14px;padding:16px;box-shadow:0 10px 24px rgba(0,0,0,.35)}
#question{font-size:20px;margin:4px 0 12px}
.choices{display:grid;grid-template-columns:1fr 1fr;gap:10px}
.choices button{padding:12px 14px;border-radius:12px;border:1px solid rgba(255,255,255,.18);background:#1b1f4a;color:#fff;font-size:16px;cursor:pointer;transition:transform .05s, background .2s}
.choices button:hover{transform:translateY(-1px)}
.choices button:active{transform:translateY(0)}
.tools{margin-top:10px;display:flex;justify-content:flex-end}
button.ghost{background:transparent;border:1px solid rgba(255,255,255,.24);padding:8px 12px;border-radius:10px;color:#ddd;cursor:pointer}
button.ghost:hover{background:rgba(255,255,255,.06)}
.overlay{position:fixed;inset:0;background:rgba(0,0,0,.5);display:flex;align-items:center;justify-content:center;z-index:10}
.modal{background:#161a3f;border:1px solid rgba(255,255,255,.12);padding:18px 20px;border-radius:14px;max-width:360px;width:92%;text-align:center;box-shadow:0 10px 24px rgba(0,0,0,.4)}
#restartBtn{margin-top:12px;padding:10px 14px;border-radius:12px;border:1px solid rgba(255,255,255,.18);background:#1b1f4a;color:#fff;cursor:pointer}
@keyframes slash{0%{opacity:0;transform:scale(.5) translate(-20px,-20px)}60%{opacity:1;transform:scale(1) translate(0,0)}100%{opacity:0;transform:scale(1.2) translate(10px,10px)}}
@keyframes shake{0%,100%{transform:translateX(0)}20%{transform:translateX(-6px)}40%{transform:translateX(6px)}60%{transform:translateX(-4px)}80%{transform:translateX(4px)}}
.shake{animation:shake .3s linear}
.attack-hero{transform:translateX(4%) scale(1.02)}
.attack-monster{transform:translateX(-4%) scale(1.02)}
.slash{animation:slash .35s ease-out}
